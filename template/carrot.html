<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nijitter - ÊäïÁ®øË©≥Á¥∞</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kiwi+Maru&family=Sawarabi+Gothic&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/static/css/common.css">
</head>

<body data-api-url="{{ .apiUrl }}" data-image-url="{{ .image_url }}" data-carrot-id="{{ .carrotID }}">
    <!-- Mobile View -->
    <div class="mobile-view">
        <header class="mobile-header">
            <button id="backBtn" class="btn btn-small btn-text">‚Üê Êàª„Çã</button>
        </header>

        <main>
            <div id="postDetail"></div>
            <div style="border-top: 1px solid var(--color-gray-light); padding: 16px;">
                <h3 style="margin-bottom: 16px;">Ëøî‰ø°</h3>
                <div id="repliesList"></div>
                <div id="loadMoreReplies" style="text-align: center; padding: 16px;">
                    <button class="btn btn-secondary" id="loadMoreBtn">„ÇÇ„Å£„Å®Ë°®Á§∫</button>
                </div>
            </div>
        </main>

        <button class="btn btn-post" id="replyButton">‚úé</button>

        <nav class="mobile-nav">
            <button class="nav-icon" title="„Éõ„Éº„É†">üè†</button>
        </nav>
    </div>

    <!-- Desktop View -->
    <div class="desktop-view">
        <div class="desktop-container">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <div class="avatar avatar-small" id="desktopUserAvatar">üë§</div>
                    <div class="sidebar-user-info">
                        <div class="sidebar-name" id="desktopUserName">„É¶„Éº„Ç∂„Éº</div>
                        <div class="sidebar-id" id="desktopUserId">@user</div>
                    </div>
                </div>

                <nav class="sidebar-nav">
                    <div class="sidebar-item">
                        <div class="sidebar-icon">üè†</div>
                        <span>„Éõ„Éº„É†</span>
                    </div>
                </nav>

                <div class="logout-section">
                    <button class="logout-btn" id="logoutBtn">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
                </div>
            </aside>

            <main class="main-content">
                <div style="padding: 16px; border-bottom: 1px solid var(--color-gray-light);">
                    <button id="backBtn" class="btn btn-small btn-text">‚Üê Êàª„Çã</button>
                </div>
                <div id="postDetail"></div>
                <div style="border-top: 1px solid var(--color-gray-light); padding: 16px;">
                    <h3 style="margin-bottom: 16px;">Ëøî‰ø°</h3>
                    <div id="repliesList"></div>
                    <div id="loadMoreReplies" style="text-align: center; padding: 16px;">
                        <button class="btn btn-secondary" id="loadMoreBtn">„ÇÇ„Å£„Å®Ë°®Á§∫</button>
                    </div>
                </div>
            </main>

            <aside class="right-panel">
                <button class="btn btn-primary" id="desktopReplyButton"
                    style="width: 100%; margin-bottom: 20px; font-size: 18px; padding: 16px;">Ëøî‰ø°„Åô„Çã</button>
                <div class="sidebar-section">
                    <h3 class="sidebar-section-title">ÊäïÁ®øÊÉÖÂ†±</h3>
                    <p style="color: var(--color-gray-medium); text-align: center; padding: 24px;">
                        „Åì„ÅÆÊäïÁ®ø„Å∏„ÅÆËøî‰ø°„ÇíË°®Á§∫‰∏≠
                    </p>
                </div>
            </aside>
        </div>
    </div>

    <!-- Modal for reply -->
    <div id="replyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ëøî‰ø°</h2>
                <button class="modal-close" id="modalClose">√ó</button>
            </div>
            <div class="modal-body">
                <form id="replyForm" class="post-form">
                    <textarea class="post-textarea" id="replyText" placeholder="Ëøî‰ø°„ÇíÂÖ•Âäõ..." maxlength="280"></textarea>
                    <div class="char-counter" id="replyCharCounter">0 / 280</div>
                    <div id="replyError" class="error-message"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="modalCancel">„Ç≠„É£„É≥„Çª„É´</button>
                <button type="button" class="btn btn-primary" id="replySubmit">Ëøî‰ø°</button>
            </div>
        </div>
    </div>

    <script type="module" src="/static/js/carrot.js"></script>
</body>

</html>